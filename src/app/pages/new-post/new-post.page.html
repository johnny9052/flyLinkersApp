<app-header titulo=" {{ 'nuevoPost' | translate }} "></app-header>

<ion-content>
  <form #formulario="ngForm" (ngSubmit)="publicPost()">
    <ion-item lines="none">
      <ion-avatar class="image-center top-margin-20">
        <img src="https://flylinkers.com/media/{{(imagePerfil !== '' )? imagePerfil: 'avatar_2x.png' }}">
      </ion-avatar>
    </ion-item>

    <ion-item lines="none"></ion-item>

    <ion-item>
      <ion-label position="floating">{{ 'titulo' | translate }}</ion-label>

      <ion-input
        type="text"
        name="title"
        
        [(ngModel)]="newPost.title"
      ></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">{{ 'descripcion' | translate }}</ion-label>

      <ion-textarea
        rows="6"
        cols="20"
        
        name="content"
        [(ngModel)]="newPost.content"
      ></ion-textarea>
    </ion-item>

    <ion-item lines="none">
      <ion-icon
        slot="start"
        name="link"
      ></ion-icon>

      <ion-icon
        slot="start"
        name="camera"
        (click)="takePictureBase64()"
      ></ion-icon>

      <ion-icon
        slot="start"
        name="images"
        (click)="loadPictureBase64()"
      ></ion-icon>
    </ion-item>

    <ion-item *ngIf=" newPost.image_new !== '' &&  newPost.image_new !== 'undefined' && newPost.image_new !== undefined"> 
        <ion-card>
          
            <img [src]="newPost.image_new | imageSanitizer">

            <ion-item color="FlyLinkers-Blanco" lines="none" (click)="borrarFoto()">
                <ion-icon name="trash"  size="small"></ion-icon>
            </ion-item>
        </ion-card>           
    </ion-item>

    <ion-item>
      <ion-label position="floating">{{ 'url' | translate }}</ion-label>

      <ion-input
        type="text"
        name="external_url_new"
        [(ngModel)]="newPost.external_url_new"
      ></ion-input>
    </ion-item>

    <ion-grid fixed="fixed">
      <ion-row class="ion-text-center">
        <ion-col size="6">
          <ion-button
            color="flylinkers"
            type="submit"
            [disabled]="formulario.invalid"
            fill="outline" *ngIf="idPost==='' || idPost=== undefined"
          >{{ 'compartir' | translate }}</ion-button>

          <ion-button
            color="flylinkers"            
            [disabled]="formulario.invalid"
            fill="outline" *ngIf="idPost!=='' &&  idPost!== undefined"
            (click)="editPost()"
          >{{ 'editar' | translate }}</ion-button>
        </ion-col>

        <ion-col size="6">
          <ion-button
            color="flylinkers"
            routerLink="/master-page"
            fill="outline"
          >{{ 'cancelar' | translate }}</ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>

<app-tab
  homeColor="flylinkersBlanco"
  networkColor="flylinkersBlanco"
  notificationsColor="flylinkersBlanco"
  messagesColor="flylinkersBlanco"
  newPostColor="flylinkersGrisOscuro"
></app-tab>