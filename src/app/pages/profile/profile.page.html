<app-header titulo="{{ 'perfil' | translate }}"></app-header>

<ion-content padding="padding">
  <form #formulario="ngForm" (ngSubmit)="saveProfileData()">
    <ion-list>
      <ion-item>
        <ion-grid fixed="fixed">
          <ion-row class="ion-text-center">
            <ion-col size="12">
              <div class="bordeado">
                <!--SI NO TIENE IMAGEN DE PERFIL-->
                <ion-avatar
                  *ngIf="!this.helperService.isValidValue(userData.image_perfil)"
                  class="image-center top-margin-20"
                >
                  <img src="https://flylinkers.com/media/avatar_2x.png" />
                </ion-avatar>

                <!--SI TIENE IMAGEN DE PERFIL-->
                <ion-avatar
                  *ngIf="this.helperService.isValidValue(userData.image_perfil)"
                  class="image-center top-margin-20"
                >
                  <!-- <img [src]="('https://flylinkers.com/media/' + userData.image_perfil) | imageSanitizer"> -->
                  <img [src]="userData.image_perfil | imageSanitizer" />
                </ion-avatar>

                <br />
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item>
        <h3>{{userData.fistName}}</h3>
      </ion-item>
      
      <ion-item>
        <ion-label position="floating"
          >{{ 'apellidos' | translate }}*</ion-label
        >

        <ion-input
          type="text"
          name="lastName"
          required="required"
          [(ngModel)]="userData.lastName"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label>{{ 'genero' | translate }}*</ion-label>

        <ion-select
          placeholder="Seleccione"
          [(ngModel)]="userData.gender"
          name="gender"
        >
          <ion-select-option value="M"
            >{{ 'masculino' | translate }}</ion-select-option
          >

          <ion-select-option value="F"
            >{{ 'femenino' | translate }}</ion-select-option
          >
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>{{ 'fechaNacimiento' | translate }}</ion-label>

        <ion-datetime
          placeholder="{{ 'seleccione' | translate }}"
          display-format="YYYY MMMM DD"
          cancelText="{{ 'cancelar' | translate }}"
          [(ngModel)]="userData.birthday_date"
          name="birthday_date"
          [pickerOptions]="customPickerOptions"
        ></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label position="floating"
          >{{ 'paisResidencia' | translate }}*</ion-label
        >

        <ion-input
          type="text"
          name="residence_country"
          required="required"
          [(ngModel)]="userData.residence_country"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">{{ 'titular' | translate }}*</ion-label>

        <ion-textarea
          name="headline"
          required="required"
          [(ngModel)]="userData.headline"
        ></ion-textarea>
      </ion-item>

      <ion-item>
        <ion-label position="floating"
          >{{ 'profesion' | translate }}*</ion-label
        >

        <ion-input
          type="text"
          name="profession"
          required="required"
          [(ngModel)]="userData.profession"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">{{ 'educacion' | translate }}</ion-label>

        <ion-input
          type="text"
          name="education"
          [(ngModel)]="userData.education"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label>{{ 'area' | translate }}</ion-label>

        <ion-select
          placeholder="{{ 'seleccione' | translate }}"
          name="area_choices"
          [(ngModel)]="userData.area_choices"
        >
          <ion-select-option value="administrative"
            >{{ 'administrativo' | translate }}</ion-select-option
          >

          <ion-select-option value="airport ramp agent">
            {{ 'agenteRampa' | translate }}
          </ion-select-option>

          <ion-select-option value="aircraft cargo agent"
            >{{ 'agenteCarga' | translate }}</ion-select-option
          >

          <ion-select-option value="aircraft dispatcher"
            >{{ 'despachadorAviones' | translate }}</ion-select-option
          >

          <ion-select-option value="aircraft maintenance inspector">
            {{ 'inspectorMantenimientoAviones' | translate }}
          </ion-select-option>

          <ion-select-option value="aircraft ground handler">
            {{ 'aeronavesTierra' | translate }}
          </ion-select-option>

          <ion-select-option value="baggage handler"
            >{{ 'manejadorEquipaje' | translate }}</ion-select-option
          >

          <ion-select-option value="captain"
            >{{ 'capitan' | translate }}</ion-select-option
          >

          <ion-select-option value="cargo screener"
            >{{ 'cribadorCarga' | translate }}</ion-select-option
          >

          <ion-select-option value="first officer"
            >{{ 'primerOficial' | translate }}</ion-select-option
          >

          <ion-select-option value="flight attendant"
            >{{ 'auxiliarVuelo' | translate }}</ion-select-option
          >

          <ion-select-option value="loadmaster"
            >{{ 'maestroCarga' | translate }}</ion-select-option
          >

          <ion-select-option value="senior executive"
            >{{ 'altoEjecutivo' | translate }}</ion-select-option
          >

          <ion-select-option value="software development"
            >{{ 'desarrolladorSoftware' | translate }}</ion-select-option
          >

          <ion-select-option value="stewardess"
            >{{ 'azafata' | translate }}</ion-select-option
          >

          <ion-select-option value="warehouse specialist"
            >{{ 'especialistaAlmacen' | translate }}</ion-select-option
          >

          <ion-select-option value="other"
            >{{ 'otro' | translate }}</ion-select-option
          >
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label position="floating"
          >{{ 'empresaActual' | translate }}</ion-label
        >

        <ion-input
          type="text"
          name="current_company"
          [(ngModel)]="userData.current_company"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating"
          >{{ 'cargoActual' | translate }}</ion-label
        >

        <ion-input
          type="text"
          name="current_position"
          [(ngModel)]="userData.current_position"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">{{ 'telefono' | translate }}</ion-label>

        <ion-input
          type="number"
          name="phone"
          [(ngModel)]="userData.phone"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">{{ 'celular' | translate }}</ion-label>

        <ion-input
          type="number"
          name="mobile"
          [(ngModel)]="userData.mobile"
        ></ion-input>
      </ion-item>
    </ion-list>

    <ion-grid fixed="fixed">
      <ion-row class="ion-text-center">
        <ion-col size="12">
          <ion-button
            color="flylinkers"
            type="submit"
            [disabled]="formulario.invalid"
            fill="outline"
            >{{ 'guardarPerfil' | translate }}</ion-button
          >
        </ion-col>
      </ion-row>

      <ion-row class="ion-text-center">
        <ion-col size="12">
          <ion-button
            color="flylinkers"
            [disabled]="formulario.invalid"
            (click)="changePassword()"
            fill="outline"
            >{{ 'cambiarPassword' | translate }}</ion-button
          >
        </ion-col>
      </ion-row>

      <ion-row class="ion-text-center">
        <ion-col size="12">
          <ion-button
            color="flylinkers"
            [disabled]="formulario.invalid"
            (click)="deactivateAccount()"
            fill="outline"
            >{{ 'desactivarCuentaAccion' | translate }}</ion-button
          >
        </ion-col>
      </ion-row>

      <!-- <ion-row>
                <ion-col size="12">
                    <ion-button
                        expand="full"
                        color="flylinkersRojo"
                    >Desactivar cuenta</ion-button>
                </ion-col>
            </ion-row> -->
    </ion-grid>

    <!-- ********************************************************************** -->
    <!-- *************************SECCION DE HABILIDADES*********************** -->
    <!-- ********************************************************************** -->

    <ion-card
      style="width: 100%; margin: 0px !important; border-radius: 2px;"
      color="flylinkers"
    >
      <ion-item color="FlyLinkers-Blanco" (click)="showHideSkills()">
        <ion-label>
          {{ 'habilidades' | translate }} ({{userSkills.length}})
        </ion-label>

        <ion-icon ios="ios-eye" md="md-eye"></ion-icon>
      </ion-item>

      <ion-card-content
        [hidden]="hiddenSkills"
        style="width: 100%; margin: 0px !important; border-radius: 0px; padding: 0px;"
      >
        <ion-item *ngFor="let skills of userSkills;">
          <ion-label>
            <h3>{{skills.skill_description}}</h3>
          </ion-label>

          <ion-icon
            name="trash"
            slot="end"
            (click)="deleteSkill(skills.id)"
          ></ion-icon>

          <ion-icon
            name="create"
            slot="end"
            (click)="editSkill(skills.id, skills.skill_description)"
          ></ion-icon>
        </ion-item>

        <ion-item text-center="text-center" class="ion-text-center">
          <ion-label>
            <ion-button
              color="flylinkers"
              fill="outline"
              (click)="createSkill()"
              >{{ 'crearSkill' | translate }}</ion-button
            >
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- ********************************************************************** -->
    <!-- **********************END SECCION DE HABILIDADES********************** -->
    <!-- ********************************************************************** -->
    <br />
    <!-- ******************************************************************** -->
    <!-- *************************SECCION DE EXPERIENCIAS********************** -->
    <!-- ********************************************************************** -->

    <ion-card
      style="width: 100%; margin: 0px !important; border-radius: 2px;"
      color="flylinkers"
    >
      <ion-item color="FlyLinkers-Blanco" (click)="showHideExperiences()">
        <ion-label>
          {{ 'experiencias' | translate }} ({{userExperiences.length}})
        </ion-label>

        <ion-icon ios="ios-eye" md="md-eye"></ion-icon>
      </ion-item>

      <ion-card-content
        [hidden]="hiddenExperiences"
        style="width: 100%; margin: 0px !important; border-radius: 0px; padding: 0px;"
      >
        <ion-item *ngFor="let experiences of userExperiences;">
          <ion-label>
            <h3>{{experiences.title}}</h3>
          </ion-label>

          <ion-icon
            name="trash"
            slot="end"
            (click)="deleteExperience(experiences.id)"
          ></ion-icon>

          <ion-icon
            name="create"
            slot="end"
            (click)="editarExperiencia(experiences.id, experiences.title, experiences.company, experiences.location,
                         experiences.init_date, experiences.end_date, experiences.currently_working, experiences.headline_experience,
                         experiences.description_experience)"
          ></ion-icon>
        </ion-item>

        <ion-item text-center="text-center" class="ion-text-center">
          <ion-label>
            <ion-button
              color="flylinkers"
              fill="outline"
              (click)="crearNuevaExperiencia()"
              >{{ 'crearExperiencia' | translate }}</ion-button
            >
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- ********************************************************************** -->
    <!-- **********************END SECCION DE EXPERIENCIAS********************* -->
    <!-- ********************************************************************** -->
    <br />
    <!-- ********************************************************************** -->
    <!-- *************************SECCION DE LOGROS**************************** -->
    <!-- ********************************************************************** -->

    <ion-card
      style="width: 100%; margin: 0px !important; border-radius: 2px;"
      color="flylinkers"
    >
      <ion-item color="FlyLinkers-Blanco" (click)="showHideAccomplishments()">
        <ion-label>
          {{ 'logros' | translate }} ({{userAccomplishments.length}})
        </ion-label>

        <ion-icon ios="ios-eye" md="md-eye"></ion-icon>
      </ion-item>

      <ion-card-content
        [hidden]="hiddenAccomplishments"
        style="width: 100%; margin: 0px !important; border-radius: 0px; padding: 0px;"
      >
        <ion-item *ngFor="let accomplishments of userAccomplishments;">
          <ion-label>
            <h3>
              {{accomplishments.accomplishment_description}}
            </h3>
          </ion-label>

          <ion-icon
            name="trash"
            slot="end"
            (click)="deleteAccomplishment(accomplishments.id)"
          ></ion-icon>

          <ion-icon
            name="create"
            slot="end"
            (click)="editAccomplishment(accomplishments.id, accomplishments.accomplishment_description)"
          ></ion-icon>
        </ion-item>

        <ion-item text-center="text-center" class="ion-text-center">
          <ion-label>
            <ion-button
              color="flylinkers"
              fill="outline"
              (click)="createAccomplishment()"
              >{{ 'crearLogro' | translate }}</ion-button
            >
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- ********************************************************************** -->
    <!-- **********************END SECCION DE LOGROS*************************** -->
    <!-- ********************************************************************** -->
    <br />
    <!-- ********************************************************************** -->
    <!-- *************************SECCION DE INTERESES************************* -->
    <!-- ********************************************************************** -->

    <ion-card
      style="width: 100%; margin: 0px !important; border-radius: 2px;"
      color="flylinkers"
    >
      <ion-item color="FlyLinkers-Blanco" (click)="showHideInterests()">
        <ion-label>
          {{ 'intereses' | translate }} ({{userInterests.length}})
        </ion-label>

        <ion-icon ios="ios-eye" md="md-eye"></ion-icon>
      </ion-item>

      <ion-card-content
        [hidden]="hiddenInterests"
        style="width: 100%; margin: 0px !important; border-radius: 0px; padding: 0px;"
      >
        <ion-item *ngFor="let interests of userInterests;">
          <ion-label>
            <h3>
              {{interests.interest_description}}
            </h3>
          </ion-label>

          <ion-icon
            name="trash"
            slot="end"
            (click)="deleteInterests(interests.id)"
          ></ion-icon>

          <ion-icon
            name="create"
            slot="end"
            (click)="editInterests(interests.id, interests.interest_description)"
          ></ion-icon>
        </ion-item>

        <ion-item text-center="text-center" class="ion-text-center">
          <ion-label>
            <ion-button
              color="flylinkers"
              fill="outline"
              (click)="createInterests()"
              >{{ 'crearInteres' | translate }}</ion-button
            >
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- ********************************************************************** -->
    <!-- **********************END SECCION DE INTERESES************************ -->
    <!-- ********************************************************************** -->
    <br />
  </form>
</ion-content>

<app-tab></app-tab>
